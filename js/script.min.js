"use strict";const nav=document.querySelector(".nav"),day=document.querySelector(".day"),week=document.querySelector(".week"),month=document.querySelector(".month"),year=document.querySelector(".year"),curDate=document.querySelector(".curDate"),modal=document.querySelector(".addModal"),textarea=document.querySelector(".textarea"),deadline=document.querySelector(".time"),parentLi=document.querySelector(".parent"),miniMonth=document.querySelector(".miniMonth"),miniMonthBody=document.querySelector(".miniMonth__days"),monthDays=document.querySelector(".month__days"),btnAddTask=document.querySelector(".btnAdd"),goose=document.querySelector(".goose"),navDayWrapper=[...document.querySelectorAll(".nav__wrapper")],now=new Date,monthArr=["Січень","Лютий","Березень","Квітень","Тривень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"];curDate.innerHTML=`<i class="fas fa-calendar-day"></i>${now.getDate()} / ${now.getMonth()+1} / ${now.getFullYear()}`,curDate.addEventListener("click",()=>{miniMonth.style.display="grid"}),document.querySelector(".fa-times").addEventListener("click",()=>{miniMonth.style.display="none"});const navItems=[...document.querySelectorAll(".nav__wrapper")],windows=[day,month,year];function bgc(){navItems.forEach(e=>{e.style.background="transparent"})}function showWindow(){windows.forEach(e=>{e.style.display="none"})}function getTaskGroupName(){return`${now.getDate()}/${now.getMonth()+1}/${now.getFullYear()}`}nav.addEventListener("click",e=>{e.target&&"nav__item_day"==e.target.className&&(bgc(),e.target.parentElement.style.background="rgba(0, 0, 0, .1)",showWindow(),day.style.display="grid"),e.target&&"nav__item_week"==e.target.className&&(bgc(),e.target.parentElement.style.background="rgba(0, 0, 0, .1)",showWindow(),week.style.display="grid"),e.target&&"nav__item_month"==e.target.className&&(bgc(),e.target.parentElement.style.background="rgba(0, 0, 0, .1)",showWindow(),month.style.display="grid"),e.target&&"nav__item_year"==e.target.className&&(bgc(),e.target.parentElement.style.background="rgba(0, 0, 0, .1)",showWindow(),year.style.display="grid")}),document.querySelector(".addTask").addEventListener("click",()=>{modal.style.display="block"}),document.querySelector(".btnCancel").addEventListener("click",()=>{modal.style.display="none"});let task=[];function reload(e){const t=localStorage.getItem(e);t&&(task=JSON.parse(t))}function renderList(e){const t=localStorage.getItem(e);if(null!=t){const e=JSON.parse(t).map(e=>`<li>\n                        <input type="checkbox" class="checkbox">\n                        <label  data-content="${e[0]}">${e[0]}</label>\n                        <label class="deadline" data-content="До: ${e[1]}">До: ${e[1]}</label>\n                        <span class="delete"><i class="far fa-trash-alt"></i></span>\n                    </li>`).join("");parentLi.innerHTML=e}}btnAddTask.addEventListener("mousedown",()=>{goose.style.display="block"}),btnAddTask.addEventListener("mouseup",()=>{const e=textarea.value,t=deadline.value;""!=e&&(task.push([e,t]),localStorage.setItem(""+getTaskGroupName(),JSON.stringify(task))),textarea.value="",modal.style.display="none",goose.style.display="none",renderList(getTaskGroupName())}),reload(getTaskGroupName()),console.log(getTaskGroupName()),renderList(getTaskGroupName());const doneLi=document.querySelector(".done");function renderMonthCalendar(){now.setDate(1);const e=new Date(now.getFullYear(),now.getMonth()+1,0).getDate(),t=new Date(now.getFullYear(),now.getMonth(),0).getDate(),n=now.getDay(),a=7-new Date(now.getFullYear(),now.getMonth()+1,1).getDay();document.querySelector(".curMonth").innerHTML=monthArr[now.getMonth()],document.querySelector(".curYear").innerHTML=""+now.getFullYear(),document.querySelector(".miniCurDate").innerHTML=`${monthArr[now.getMonth()]} / ${now.getFullYear()}`;let r="";for(let e=n;e>0;e--)r+=`<div class="prevMonsDays">${t-e+1}</div>`;for(let t=1;t<=e;t++)t==(new Date).getDate()&&now.getMonth()==(new Date).getMonth()&&now.getFullYear()==(new Date).getFullYear()?r+=`<div class="today">${t}</div>`:r+=`<div>${t}</div>`;for(let e=1;e<=a;e++)r+=`<div class="nextMonsDays">${e}</div>`;monthDays.innerHTML=r,miniMonthBody.innerHTML=r}parentLi.addEventListener("click",e=>{if(e.target&&"far fa-trash-alt"==e.target.className){const t=e.target.parentElement.parentElement.children[1].innerHTML,n=e.target.parentElement.parentElement.children[2].innerHTML,a=task.indexOf(task.find(e=>e[0]==""+t&&e[1]==""+n));task.splice(a,1),localStorage.setItem(""+getTaskGroupName(),JSON.stringify(task));e.target.parentNode.parentNode.remove()}}),renderMonthCalendar(),document.querySelector(".month-chevron-left").addEventListener("click",()=>{now.setMonth(now.getMonth()-1),renderMonthCalendar()}),document.querySelector(".month-chevron-right").addEventListener("click",()=>{now.setMonth(now.getMonth()+1),renderMonthCalendar()}),monthDays.addEventListener("click",e=>{const t=e.target.innerHTML,n=e.target.parentElement.parentElement.parentElement.children[0].children[1].innerHTML,a=monthArr.indexOf(n)-1;-1==a&&(setMonth=11),e.target&&"DIV"==e.target.tagName&&now.setDate(t),e.target&&"prevMonsDays"==e.target.className&&(now.setDate(t),now.setMonth(a)),e.target&&"nextMonsDays"==e.target.className&&(now.setDate(t),now.setMonth(a+2)),curDate.innerHTML=`<i class="fas fa-calendar-day"></i>${now.getDate()} / ${now.getMonth()+1} / ${now.getFullYear()}`,month.style.display="none",day.style.display="grid",bgc(),navDayWrapper[0].style.background="rgba(0, 0, 0, .1)",localStorage.getItem(getTaskGroupName())?renderList(getTaskGroupName()):(task=[],parentLi.innerHTML="")}),miniMonthBody.addEventListener("click",e=>{miniMonth.style.display="none",now.setDate(e.target.innerHTML),localStorage.getItem(getTaskGroupName())?renderList(getTaskGroupName()):(task=[],parentLi.innerHTML=""),e.target&&"DIV"==e.target.tagName&&(curDate.innerHTML=`<i class="fas fa-calendar-day"></i>${now.getDate()} / ${now.getMonth()+1} / ${now.getFullYear()}`),e.target&&"nextMonsDays"==e.target.className&&(curDate.innerHTML=`<i class="fas fa-calendar-day"></i>${now.getDate()} / ${now.getMonth()+2} / ${now.getFullYear()}`),e.target&&"prevMonsDays"==e.target.className&&(curDate.innerHTML=`<i class="fas fa-calendar-day"></i>${now.getDate()} / ${now.getMonth()-1} / ${now.getFullYear()}`)}),document.querySelector(".miniMonth-chevron-left").addEventListener("click",()=>{now.setMonth(now.getMonth()-1),renderMonthCalendar()}),document.querySelector(".miniMonth-chevron-right").addEventListener("click",()=>{now.setMonth(now.getMonth()+1),renderMonthCalendar()});const curYearInYear=document.querySelector(".curYearInYear"),yearMonthName=[...document.querySelectorAll(".yearMonth__month")],yearMonthDays=[...document.querySelectorAll(".yearMonth__days")];curYearInYear.innerHTML=""+now.getFullYear(),document.querySelector(".year-chevron-left").addEventListener("click",()=>{now.setFullYear(""+(now.getFullYear()-1)),curYearInYear.innerHTML=""+now.getFullYear(),renderYearCalendar()}),document.querySelector(".year-chevron-right").addEventListener("click",()=>{now.setFullYear(""+(now.getFullYear()+1)),curYearInYear.innerHTML=""+now.getFullYear(),renderYearCalendar()});for(let e=0;e<yearMonthName.length;e++)yearMonthName[e].innerText=""+monthArr[e];function renderYearCalendar(){const e=[...document.querySelectorAll(".yearMonth__days")];for(let t=0;t<e.length;t++){now.setDate(1),now.setMonth(t);const n=new Date(now.getFullYear(),now.getMonth()+1,0).getDate(),a=new Date(now.getFullYear(),now.getMonth(),0).getDate(),r=now.getDay(),o=7-new Date(now.getFullYear(),now.getMonth()+1,1).getDay();let l="";for(let e=r;e>0;e--)l+=`<div class="prevMonsDays">${a-e+1}</div>`;for(let e=1;e<=n;e++)e==(new Date).getDate()&&now.getMonth()==(new Date).getMonth()&&now.getFullYear()==(new Date).getFullYear()?l+=`<div class="today">${e}</div>`:l+=`<div>${e}</div>`;for(let e=1;e<=o;e++)l+=`<div class="nextMonsDays">${e}</div>`;e[t].innerHTML=l}now.setMonth((new Date).getMonth()),now.setDate((new Date).getDate())}renderYearCalendar();const yearMonthBody=[...document.querySelectorAll(".yearMonth__body")];yearMonthBody.forEach(e=>{e.addEventListener("click",e=>{const t=e.target.parentElement.parentElement.parentElement.children[0].innerHTML,n=monthArr.indexOf(t),a=e.target.innerHTML;e.target&&"yearMonth__days"==e.target.parentElement.className&&(now.setDate(a),now.setMonth(n),curDate.innerHTML=`<i class="fas fa-calendar-day"></i>${now.getDate()} / ${now.getMonth()+1} / ${now.getFullYear()}`,year.style.display="none",day.style.display="grid",bgc(),navDayWrapper[0].style.background="rgba(0, 0, 0, .1)"),localStorage.getItem(getTaskGroupName())?renderList(getTaskGroupName()):(task=[],parentLi.innerHTML="")})});